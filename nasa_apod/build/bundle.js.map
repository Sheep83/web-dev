{"version":3,"sources":["webpack:///webpack/bootstrap 6d8372273c859078fc11","webpack:///./public/app.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA,8B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,KAAK;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,KAAK;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6d8372273c859078fc11\n **/","var lastImage = [];\n\nwindow.onload = function () {  \n  visited = [];\n  var url = 'https://api.nasa.gov/planetary/apod?&api_key=T1AUnT68vq8FeqlfaGROtZl5h6mk9iMoz9Z7MKNy';\n  var calendar = document.getElementById('inputDate');\n  var button = document.getElementById('random');\n  var historyDropDown = document.getElementById('history');\n  var fullSizeButton = document.getElementById('fullSize');\n  var favouriteButton = document.getElementById('favourite')\n  calendar.onchange = getByDate;\n  button.onclick = randomDate;\n  historyDropDown.onchange = getFromHistory;\n  favouriteButton.onclick = addToFavourites;\n    // fullSizeButton.onclick = showFullSize;\n    // console.log(url);\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url);\n    request.onload = function () {\n      if (request.status === 200) {\n        var jsonString = request.responseText;\n        var data = JSON.parse(jsonString);\n        // console.log(data);\n      }\n      main(data);\n    }\n    request.send();\n  }\n\n  var main = function(data){\n    apodDisplay(data);\n    populateHistory();\n  }\n\n  var apodDisplay = function(data){\n    var stats = document.querySelectorAll('#info p');\n    var title = document.getElementById('subheading');\n    var image = document.getElementById('fullSize');\n    // console.log(data.hdurl);\n\n    image.innerHTML = \"<a href= '\"+ data.hdurl + \"'>Full Size\"\n\n    title.innerHTML = \"<b><center>\" + data.title + \"</center></b>\"\n    stats[0].innerHTML = \"\" + data.explanation;\n    stats[1].innerHTML = \"<b>Copyright : </b>\" + data.copyright;\n    stats[2].innerHTML = \"<b>Date : </b>\" + data.date;\n    // console.log(data);\n    if (data.media_type === \"image\"){\n      showImage(data.url, 500, 375, data.url);\n    }else if (data.media_type === 'video'){\n      showImage('/Under-construction.jpeg', 500, 375, '/Under-construction.jpeg');\n      console.log('Video Support Coming Soon!')\n      // showVideo(data.url, 500, 375, data.url)\n    }\n    if (lastImage.length > 0){\n      lastImage.pop();\n      lastImage.push(data);\n    }else{\n      lastImage.push(data);\n    }\n    console.log(lastImage);\n  }\n\n  var showImage = function(src, width, height, alt) {\n    var imgDiv = document.getElementById('img');\n    if (imgDiv.firstChild){\n      imgDiv.removeChild(imgDiv.firstChild);\n      var img = document.createElement(\"img\");\n      img.src = src;\n      img.width = 500;\n      img.height = 375;\n      img.alt = src;\n      imgDiv.appendChild(img);\n    }else{var img = document.createElement(\"img\");\n    img.src = src;\n    img.width = 500;\n    img.height = 375;\n    img.alt = src;\n    imgDiv.appendChild(img);\n  }\n}\n\nvar randomDate = function(){\n  array = [];\n  randDay = Math.floor((Math.random() * 28) + 1);\n  randMonth = Math.floor((Math.random() * 12) + 1);\n  randYear = Math.floor(Math.random() * (2015 - 1996) + 1996);\n  array.push(randYear, randMonth, randDay);\n  randDate = array.join('-');\n  // console.log(randDate);\n  url = 'https://api.nasa.gov/planetary/apod?date=' + randDate + '&api_key=T1AUnT68vq8FeqlfaGROtZl5h6mk9iMoz9Z7MKNy';\n  var request = new XMLHttpRequest();\n  request.open(\"GET\", url);\n  request.setRequestHeader(\"Content-Type\", \"application/json\");\n       // console.log(request);\n       request.onload = function(){\n         if(request.status === 200){\n          var jsonString = request.responseText;\n          var data = JSON.parse(jsonString);\n          // console.log(data);\n          visited.push(data);\n        } \n        main(data);\n        saveToDb(data);\n      }\n      request.send();\n    }\n\n    var getByDate = function(event){\n      // console.log(event);\n      selected = event.target.value;\n      url = 'https://api.nasa.gov/planetary/apod?&date=' + selected + '&api_key=T1AUnT68vq8FeqlfaGROtZl5h6mk9iMoz9Z7MKNy';\n      var request = new XMLHttpRequest();\n      request.open(\"GET\", url);\n      request.onload = function () {\n        if (request.status === 200) {\n          var jsonString = request.responseText;\n          var data = JSON.parse(jsonString);\n          visited.push(data);\n          var length = localStorage.length;\n        }\n        main(data);\n      }\n      request.send();\n    }\n\n    var populateHistory = function(){\n      var request = new XMLHttpRequest();\n      request.open(\"GET\", '/history');\n      request.setRequestHeader(\"Content-Type\", \"application/json\");\n             // console.log(request);\n             request.onload = function(){\n               if(request.status === 200){\n                var jsonString = request.responseText;\n                var history = JSON.parse(jsonString);\n                // console.log(history);\n              }\n              var historyDropDown = document.querySelector('#history');\n              historyDropDown.innerHTML = \"\";\n              history.forEach(function (item, index) {\n                item.index = index;\n                var option = document.createElement(\"option\");\n                option.value = index.toString();\n                option.text = item.title;\n                historyDropDown.appendChild(option);\n              });\n              historyDropDown.style.display = 'block';\n            }\n            request.send();\n\n          }\n\n          var getFromHistory = function(event){\n              // console.log(event);\n              var index = this.value;\n              var request = new XMLHttpRequest();\n              request.open(\"GET\", '/history');\n              request.setRequestHeader(\"Content-Type\", \"application/json\");\n                   // console.log(request);\n                   request.onload = function(){\n                     if(request.status === 200){\n                      var jsonString = request.responseText;\n                      var history = JSON.parse(jsonString);\n                      // console.log(history[0]);\n                    }\n                    var img = history[index];\n                    apodDisplay(img);\n                  }\n                  request.send();\n                }\n\n                var addToFavourites = function(event){\n                  console.log(event);\n                  var request = new XMLHttpRequest();\n                  request.open(\"POST\", '/favourites');\n                  request.setRequestHeader(\"Content-Type\", \"application/json\");\n             // console.log(request);\n             request.onload = function(){\n              if(request.status === 200){\n                console.log('Posted to Favourites!');\n              }\n            }\n            request.send(JSON.stringify(lastImage[0]));\n          }\n\n          var saveToDb = function(data){\n           var request = new XMLHttpRequest();\n           request.open(\"POST\", '/history');\n           request.setRequestHeader(\"Content-Type\", \"application/json\");\n             // console.log(request);\n             request.onload = function(){\n              if(request.status === 200){\n                console.log('Posted to Db!');\n              }\n            }\n            request.send(JSON.stringify(data));\n          }\n\n\n\n  // var showVideo = function(src, width, height, alt) {\n  //   var imgDiv = document.getElementById('img');\n  //   if (imgDiv.firstChild){\n  //     imgDiv.removeChild(imgDiv.firstChild);\n  //     var video = document.createElement(\"video\");\n  //     video.src = src;\n  //     video.width = 500;\n  //     video.height = 375;\n  //     video.alt = src;\n  //     video.type=\"video/mp4\";\n  //     imgDiv.appendChild(video);\n  //   }else{var video = document.createElement(\"video\");\n  //   video.src = src;\n  //   video.width = 500;\n  //   video.height = 375;\n  //   video.alt = src;\n  //   video.type=\"video/mp4\";\n  //   imgDiv.appendChild(video);\n  //   video.play();\n  // }\n\n  // }\n\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./public/app.js\n ** module id = 0\n ** module chunks = 0\n **/"],"sourceRoot":""}